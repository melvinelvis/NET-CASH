!function(){"use strict";const t=window?.bit_assist_?.api?.base,i="1"!==window?.bit_assist_?.isDev?`${t}/iframe`:"http://localhost:5000",e=new URL(i).origin,o=window?.bit_assist_?.api?.separator||"?",{protocol:n,host:s,hostname:a,href:d}=window.location,r="http:"===n?"i":"s",c="localhost"===a||"127.0.0.1"===a?s:a,w=d;let l="100px",h="100px",p=0;const u=`\n#bit-assist-widget-container{--ba-top:auto;--ba-left:auto;--ba-bottom:10;--ba-right:10;position:fixed;z-index:2147483646;bottom:0;right:0;width:${h};height:${l};max-width:100%}\n#bit-assist-widget-container.bottom-right{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-container.bottom-left{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-container.top-right{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-container.top-left{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-iframe{width:100%;height:100%;border:none;}\n.bit-assist-hide{visibility:hidden;pointer-events:none}\n`,f=document.createElement("style");f.appendChild(document.createTextNode(u));const b=document.createElement("div");b.id="bit-assist-widget-container",z();const g=document.createElement("iframe");function m(t,i=!1){const e=window.scrollY,o=document.body.offsetHeight,n=window.innerHeight,s=Math.round(e/(o-n)*100);if(!i)return s;!p&&s>=i?(p=1,v(s)):p&&s<i&&(p=0,v(s))}function v(t){g.contentWindow.postMessage({action:"scrollPercent",scrollPercent:t},e)}function y(t,i){h=`${t}px`,l=`${i}px`,Object.assign(b.style,{width:h,height:l})}g.title="wp-bit-assist",g.src=`${i}${o}clientDomain=${r}-protocol-bit-assist-${c}`,g.id="bit-assist-widget-iframe",g.setAttribute("allowfullscreen",""),g.setAttribute("scrolling","no"),b.appendChild(g),document.body.append(f,b),document.addEventListener("click",(t=>{b.classList.contains("bit-assist-open")&&!t.target.closest("#bit-assist-widget-container")&&g.contentWindow.postMessage({action:"clickOutside"},e)})),window.addEventListener("message",(i=>{if(i.origin!==e)return;const{action:o}=i.data;if("getClientInfo"===o){const i=m(),o=document.documentElement.offsetWidth,n=window.innerHeight;g.contentWindow.postMessage({action:"windowLoaded",url:w,winWidth:o,winHeight:n,scrollPercent:i,apiEndPoint:t},e)}else if("widgetLoaded"===o){const{height:t,width:e,position:o,top:n,bottom:s,left:a,right:d,pageScroll:r}=i.data;!function(t,i,e,o,n){t.includes("top")&&b.style.setProperty("--ba-top",`${i}px`);t.includes("bottom")&&b.style.setProperty("--ba-bottom",`${e}px`);t.includes("left")&&b.style.setProperty("--ba-left",`${o}px`);t.includes("right")&&b.style.setProperty("--ba-right",`${n}px`)}(o,n,s,a,d),b.classList.remove("bit-assist-hide"),b.classList.add(o),y(e,t),r>0&&window.addEventListener("scroll",(t=>m(0,r)))}else if("widgetOpen"===o){L()&&!0===Boolean(window.Tawk_API?.isChatMaximized?.())&&window.Tawk_API?.minimize();const{isWidgetOpen:t}=i.data;b.classList.toggle("bit-assist-open",t)}else if("removeWidget"===o)b.remove(),f.remove();else if("resetWidgetSize"===o){const{height:t,width:e}=i.data;y(e,t)}else if("chatWidgetClick"===o){const{chatWidgetName:t}=i.data;!function(t){E(),"tawk"===t&&function(){if(!A)return M("Tawk"),null;try{window.Tawk_API.showWidget(),window.Tawk_API.toggle(),z()}catch(t){console.log(t),M("Tawk"),W()}}();"crisp"===t&&function(){if(!$)return M("Crisp"),null;try{window.$crisp.push(["do","chat:show"]),window.$crisp.push(["do","chat:toggle"]),z()}catch{M("Crisp"),W()}}();"intercom"===t&&function(){if(!I)return M("Intercom"),null;try{window.Intercom("show"),z()}catch(t){console.log(t),M("Intercom"),W()}}();"tidio"===t&&function(){if(!C)return M("Tidio"),null;try{window.tidioChatApi.open(),window.tidioChatApi.show(),z()}catch(t){console.log(t),M("Tidio"),W()}}()}(t)}else if("bitAssistChannelClick"===o){const{channelInfo:t}=i.data;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"bitAssistChannel",...t})}})),window.addEventListener("load",(()=>{L()&&(window.Tawk_API.onLoad=function(){A=!0,window.Tawk_API.hideWidget()},window.Tawk_API.onChatMinimized=function(){window.Tawk_API.hideWidget(),W()}),P()&&($=!0,window.$crisp.push(["do","chat:hide"]),window.$crisp.push(["on","chat:closed",function(){window.$crisp.push(["do","chat:hide"]),W()}])),_()&&(I=!0,window.Intercom("update",{hide_default_launcher:!0}),window.Intercom("onShow",(()=>{z()})),window.Intercom("onHide",(()=>{W()}))),x()?(window.tidioChatApi.on("ready",k),window.tidioChatApi.on("close",T)):(document.addEventListener("tidioChat-ready",k),document.addEventListener("tidioChat-close",T))}));let A=!1,C=!1,$=!1,I=!1;function L(){return"undefined"!=typeof Tawk_API}function P(){return"undefined"!=typeof $crisp}function _(){return"undefined"!=typeof Intercom}function k(){C=!0,window.tidioChatApi.hide()}function T(){W(),window.tidioChatApi.hide()}function x(){return"undefined"!=typeof tidioChatApi}function W(){b.classList.remove("bit-assist-hide"),E()}function E(){L()&&window.Tawk_API?.minimize?.(),P()&&window.$crisp?.push?.(["do","chat:hide"]),_()&&window.Intercom?.("hide"),x()&&window.tidioChatApi?.hide?.()}function z(){b.classList.add("bit-assist-hide")}function M(t){return alert(`Sorry, ${t} is not loaded yet!`)}}();
